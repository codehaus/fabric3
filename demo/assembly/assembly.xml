<?xml version="1.0" encoding="UTF-8"?>
<!--
 * Licensed to the Apache Software Foundation (ASF) under one
 * or more contributor license agreements.  See the NOTICE file
 * distributed with this work for additional information
 * regarding copyright ownership.  The ASF licenses this file
 * to you under the Apache License, Version 2.0 (the
 * "License"); you may not use this file except in compliance
 * with the License.  You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing,
 * software distributed under the License is distributed on an
 * "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
 * KIND, either express or implied.  See the License for the
 * specific language governing permissions and limitations
 * under the License.
-->
<assembly>

    <id>bin</id>
    <includeBaseDirectory>false</includeBaseDirectory>
    
    <formats>
        <format>zip</format>
        <format>tar.gz</format>
    </formats>

    <!-- include legal and other files -->
    <files>
        <file>
            <source>LICENSE.txt</source>
            <outputDirectory>/</outputDirectory>
        </file>
        <file>
            <source>NOTICE.txt</source>
            <outputDirectory>/</outputDirectory>
            <filtered>true</filtered>
        </file>
    </files>

    <!-- include assembly files -->
    <fileSets>
        <fileSet>
            <directory>src/main</directory>
            <outputDirectory>/</outputDirectory>
        </fileSet>
    </fileSets>        

    <dependencySets>
		
        <!-- copy executable commands to the bin directory without version info -->
        <dependencySet>
            <includes>
                <include>org.codehaus.fabric3.standalone:server</include>
            </includes>
            <excludes>
                <exclude>org.codehaus.fabric3:fabric3-jmx</exclude>
                <exclude>org.codehaus.fabric3.standalone:standalone-api</exclude>
            </excludes>
            <outputDirectory>bin</outputDirectory>
            <outputFileNameMapping>${artifactId}.${extension}</outputFileNameMapping>
            <fileMode>0755</fileMode>
        </dependencySet>
        
        <!-- copy dependencies used by the executable commands to the lib directory -->
        <dependencySet>
            <includes>
                <include>org.codehaus.fabric3.standalone:standalone-api</include>
                <include>org.codehaus.fabric3.spec:sca-api-r1.0</include>
                <include>org.codehaus.fabric3:fabric3-api</include>
                <include>org.codehaus.fabric3:fabric3-host-api</include>
                <include>org.codehaus.fabric3:fabric3-jmx</include>
                <include>org.codehaus.fabric3:fabric3-spi</include>
                <include>javax.servlet:servlet-api</include>
                <include>org.codehaus.woodstox:wstx-asl</include>
                <include>stax:stax-api</include>
            </includes>
            <outputDirectory>lib</outputDirectory>
            <outputFileNameMapping>${artifactId}-${baseVersion}.${extension}</outputFileNameMapping>
        </dependencySet>

        <!-- copy boot dependencies to master profile -->
        <dependencySet>
            <includes>
                <exclude>org.codehaus.fabric3:fabric3-extension</exclude>  
                <include>org.codehaus.fabric3:fabric3-fabric</include>
                <include>org.codehaus.fabric3.standalone:standalone-host</include>
                <include>org.codehaus.fabric3:fabric3-jetty</include>
                <include>org.codehaus.fabric3:fabric3-console</include>
                <include>org.codehaus.fabric3:fabric3-messaging-jxta</include>
                <include>org.codehaus.fabric3:fabric3-discovery-jxta</include>
                <include>org.codehaus.fabric3:fabric3-binding-hessian</include>
                <include>org.codehaus.fabric3:fabric3-binding-burlap</include>
                <include>org.codehaus.fabric3:fabric3-binding-jms</include>
                <include>org.codehaus.fabric3:fabric3-binding-ws</include>
                <include>org.codehaus.fabric3:fabric3-maven</include>
                <include>org.codehaus.fabric3.demo:fabric3-demo-calculator</include>
                <include>org.apache.geronimo.specs:geronimo-j2ee-connector_1.5_spec</include>
                <include>org.apache.tuscany:commonj-api_r1.1</include>
            </includes>
            <excludes>
				<exclude>org.codehaus.fabric3.standalone:standalone-api</exclude>
                <exclude>org.codehaus.fabric3:fabric3-api</exclude>
                <exclude>org.codehaus.fabric3:fabric3-host-api</exclude>
                <exclude>org.codehaus.fabric3:fabric3-spi</exclude>
            </excludes>
            <outputDirectory>profiles/master/boot</outputDirectory>
        </dependencySet>

        <!-- copy boot dependencies to slave1 profile -->
        <dependencySet>
            <includes>
                <exclude>org.codehaus.fabric3:fabric3-extension</exclude>
                <include>org.codehaus.fabric3:fabric3-fabric</include>
                <include>org.codehaus.fabric3.standalone:standalone-host</include>
                <include>org.codehaus.fabric3:fabric3-jetty</include>
                <include>org.codehaus.fabric3:fabric3-discovery-jxta</include>
                <include>org.codehaus.fabric3:fabric3-messaging-jxta</include>
                <include>org.codehaus.fabric3:fabric3-binding-hessian</include>
                <include>org.codehaus.fabric3:fabric3-binding-burlap</include>
                <include>org.codehaus.fabric3:fabric3-binding-jms</include>
                <include>org.codehaus.fabric3:fabric3-binding-ws</include>
                <include>org.codehaus.fabric3:fabric3-maven</include>
                <include>org.codehaus.fabric3.demo:fabric3-demo-calculator</include>
                <include>org.apache.geronimo.specs:geronimo-j2ee-connector_1.5_spec</include>
                <include>org.apache.tuscany:commonj-api_r1.1</include>
            </includes>
            <excludes>
				<exclude>org.codehaus.fabric3.standalone:standalone-api</exclude>
                <exclude>org.codehaus.fabric3:fabric3-api</exclude>
                <exclude>org.codehaus.fabric3:fabric3-host-api</exclude>
                <exclude>org.codehaus.fabric3:fabric3-spi</exclude>
            </excludes>
            <outputDirectory>profiles/slave1/boot</outputDirectory>
        </dependencySet>

        <!-- copy boot dependencies to slave2 profile -->
        <dependencySet>
            <includes>
                <exclude>org.codehaus.fabric3:fabric3-extension</exclude>
                <include>org.codehaus.fabric3:fabric3-fabric</include>
                <include>org.codehaus.fabric3.standalone:standalone-host</include>
                <include>org.codehaus.fabric3:fabric3-jetty</include>
                <include>org.codehaus.fabric3:fabric3-messaging-jxta</include>
                <include>org.codehaus.fabric3:fabric3-discovery-jxta</include>
                <include>org.codehaus.fabric3:fabric3-binding-hessian</include>
                <include>org.codehaus.fabric3:fabric3-binding-burlap</include>
                <include>org.codehaus.fabric3:fabric3-binding-jms</include>
                <include>org.codehaus.fabric3:fabric3-binding-ws</include>
                <include>org.codehaus.fabric3:fabric3-maven</include>
                <include>org.codehaus.fabric3.demo:fabric3-demo-calculator</include>
                <include>org.apache.geronimo.specs:geronimo-j2ee-connector_1.5_spec</include>
                <include>org.apache.tuscany:commonj-api_r1.1</include>
            </includes>
            <excludes>
				<exclude>org.codehaus.fabric3.standalone:standalone-api</exclude>
                <exclude>org.codehaus.fabric3:fabric3-api</exclude>
                <exclude>org.codehaus.fabric3:fabric3-host-api</exclude>
                <exclude>org.codehaus.fabric3:fabric3-spi</exclude>
            </excludes>
            <outputDirectory>profiles/slave2/boot</outputDirectory>
        </dependencySet>
    </dependencySets>
    
</assembly>

